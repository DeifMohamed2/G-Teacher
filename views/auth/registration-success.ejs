<%- include('../partials/header') %>

<!-- Modern Success Page Layout -->
<div class="success-page-container" style="padding-top: 100px;">
  <!-- Animated Background -->
  <div class="success-background">
    <div class="floating-math-elements">
      <div class="math-element">∫</div>
      <div class="math-element">∑</div>
      <div class="math-element">π</div>
      <div class="math-element">α</div>
      <div class="math-element">β</div>
      <div class="math-element">γ</div>
      <div class="math-element">Δ</div>
      <div class="math-element">∞</div>
    </div>
    <div class="geometric-shapes">
      <div class="shape shape-1"></div>
      <div class="shape shape-2"></div>
      <div class="shape shape-3"></div>
      <div class="shape shape-4"></div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="success-content">
    <div class="success-card">
      <!-- Success Animation -->
      <div class="success-animation">
        <div class="success-circle">
          <div class="checkmark-container">
            <i class="fas fa-check checkmark-icon"></i>
          </div>
          <div class="pulse-ring"></div>
          <div class="pulse-ring"></div>
          <div class="pulse-ring"></div>
        </div>
      </div>

      <!-- Success Message -->
      <div class="success-message">
        <h1 class="success-title">
          <span class="title-line">Registration</span>
          <span class="title-line highlight-red">Successful!</span>
        </h1>
        <p class="success-subtitle">Welcome to Elkably, <strong><%= studentName %></strong>!</p>
        <div class="success-description">
          Your account has been created and is pending admin activation. Save your student code below so you can log in once your account is approved.
        </div>
      </div>

      <!-- Student Code Section -->
      <div class="student-code-section">
        <div class="code-header">
          <h3 class="code-title">
            <i class="fas fa-id-card"></i>
            Your Student Code
          </h3>
          <p class="code-subtitle">Keep this code safe - you'll need it to access your account</p>
          </div>

        <div class="code-display-container">
          <div class="code-box">
            <div class="code-text" id="studentCodeText"><%= studentCode %></div>
            <button class="copy-button" id="copyCodeBtn" onclick="copyStudentCode()">
              <i class="fas fa-copy"></i>
              <span>Copy</span>
            </button>
          </div>

          <div class="code-actions">
            <button class="action-btn screenshot-btn" onclick="takeScreenshot()">
              <i class="fas fa-camera"></i>
              <span>Screenshot</span>
            </button>
            <button class="action-btn download-btn" onclick="downloadCode()">
              <i class="fas fa-download"></i>
              <span>Download</span>
            </button>
            <button class="action-btn print-btn" onclick="printCode()">
              <i class="fas fa-print"></i>
              <span>Print</span>
            </button>
          </div>
        </div>

        <div class="code-warning">
          <i class="fas fa-exclamation-triangle"></i>
          <span>Important: Please save this code securely. You won't be able to retrieve it later.</span>
              </div>
            </div>
      <!-- Action Buttons -->
      <div class="action-section">
        <a href="/" class="btn-primary">
          <i class="fas fa-home"></i>
          <span>Go Home</span>
        </a>
        <a href="/auth/login" class="btn-secondary">
          <i class="fas fa-sign-in-alt"></i>
          <span> Login </span>
        </a>
      </div>
    </div>
  </div>
</div>

<!-- Custom JavaScript for Registration Success -->
<script>
  function copyStudentCode() {
    const codeText = document.getElementById('studentCodeText').textContent;
    navigator.clipboard.writeText(codeText).then(() => {
      const copyBtn = document.getElementById('copyCodeBtn');
      const originalContent = copyBtn.innerHTML;
      
      copyBtn.innerHTML = '<i class="fas fa-check"></i><span>Copied!</span>';
      copyBtn.classList.add('copied');
      
      setTimeout(() => {
        copyBtn.innerHTML = originalContent;
        copyBtn.classList.remove('copied');
      }, 2000);

      showNotification('Code copied to clipboard!', 'success');
    }).catch(() => {
      showNotification('Failed to copy code. Please copy manually.', 'error');
    });
  }

  function takeScreenshot() {
    showNotification('Take a screenshot of this page to save your student code!', 'info');
    
    // Add visual highlight to code section
    const codeSection = document.querySelector('.code-display-container');
    codeSection.classList.add('highlight');
    
    setTimeout(() => {
      codeSection.classList.remove('highlight');
    }, 3000);
  }

  function downloadCode() {
    const studentCode = '<%= studentCode %>';
    const studentName = '<%= studentName %>';
    const content = `Elkably - Student Registration Confirmation

Student Name: ${studentName}
Student Code: ${studentCode}
Registration Date: ${new Date().toLocaleDateString()}

IMPORTANT: Please keep this code safe for future reference.
You will need this code to access your account.

Welcome to Elkably!`;

    const element = document.createElement('a');
    const file = new Blob([content], { type: 'text/plain' });
    element.href = URL.createObjectURL(file);
    element.download = `elkably-student-code-${studentCode}.txt`;
    document.body.appendChild(element);
    element.click();
    document.body.removeChild(element);

    showNotification('Student code downloaded successfully!', 'success');
  }

  function printCode() {
    const studentCode = '<%= studentCode %>';
    const studentName = '<%= studentName %>';
    const printWindow = window.open('', '_blank');
    printWindow.document.write(`
    <html>
      <head>
        <title>Student Code - Math Explorers</title>
        <style>
          body { font-family: Arial, sans-serif; padding: 40px; text-align: center; }
          .header { color: #0072ff; margin-bottom: 30px; }
          .code-box { border: 2px solid #0072ff; padding: 20px; margin: 20px 0; background: #f8f9fa; }
          .code { font-size: 24px; font-weight: bold; letter-spacing: 2px; }
          .footer { margin-top: 30px; color: #666; }
        </style>
      </head>
      <body>
        <div class="header">
          <h1>Math Explorers</h1>
          <h2>Student Registration Confirmation</h2>
        </div>
        <div class="content">
          <p><strong>Student Name:</strong> ${studentName}</p>
          <div class="code-box">
            <p><strong>Student Code:</strong></p>
            <div class="code">${studentCode}</div>
          </div>
          <p><strong>Date:</strong> ${new Date().toLocaleDateString()}</p>
        </div>
        <div class="footer">
          <p>Please keep this code safe for future reference.</p>
        </div>
      </body>
    </html>
  `);
    printWindow.document.close();
    printWindow.print();

    showSuccessToast('Print dialog opened!');
  }

  function showSuccessToast(message) {
    // Simple toast notification
    const toast = document.createElement('div');
    toast.className = 'toast-notification success';
    toast.innerHTML = `<i class="fas fa-check-circle me-2"></i>${message}`;
    document.body.appendChild(toast);

    setTimeout(() => {
      toast.classList.add('show');
    }, 100);

    setTimeout(() => {
      toast.classList.remove('show');
      setTimeout(() => {
        document.body.removeChild(toast);
      }, 300);
    }, 3000);
  }

  function showInfoToast(message) {
    const toast = document.createElement('div');
    toast.className = 'toast-notification info';
    toast.innerHTML = `<i class="fas fa-info-circle me-2"></i>${message}`;
    document.body.appendChild(toast);

    setTimeout(() => {
      toast.classList.add('show');
    }, 100);

    setTimeout(() => {
      toast.classList.remove('show');
      setTimeout(() => {
        document.body.removeChild(toast);
      }, 300);
    }, 4000);
  }

  function showErrorToast(message) {
    const toast = document.createElement('div');
    toast.className = 'toast-notification error';
    toast.innerHTML = `<i class="fas fa-exclamation-triangle me-2"></i>${message}`;
    document.body.appendChild(toast);

    setTimeout(() => {
      toast.classList.add('show');
    }, 100);

    setTimeout(() => {
      toast.classList.remove('show');
      setTimeout(() => {
        document.body.removeChild(toast);
      }, 3000);
    }, 3000);
  }

  // Modern notification system
  function showNotification(message, type = 'info') {
    const notification = document.createElement('div');
    notification.className = `notification notification-${type}`;
    
    const icon = type === 'success' ? 'fa-check-circle' : 
                 type === 'error' ? 'fa-exclamation-triangle' : 'fa-info-circle';
    
    notification.innerHTML = `
      <div class="notification-content">
        <i class="fas ${icon}"></i>
        <span>${message}</span>
      </div>
    `;
    
    document.body.appendChild(notification);
    
    // Animate in
    setTimeout(() => notification.classList.add('show'), 100);
    
    // Remove after delay
    setTimeout(() => {
      notification.classList.remove('show');
      setTimeout(() => document.body.removeChild(notification), 300);
    }, 4000);
  }

  // Initialize page animations
  document.addEventListener('DOMContentLoaded', function() {
    // Ensure checkmark is visible immediately
    const checkmarkIcon = document.querySelector('.checkmark-icon');
    if (checkmarkIcon) {
      checkmarkIcon.style.opacity = '1';
      checkmarkIcon.style.transform = 'scale(1) rotate(0deg)';
    }
    
    // Ensure success message elements stay visible
    const successMessage = document.querySelector('.success-message');
    if (successMessage) {
      successMessage.style.opacity = '1';
      successMessage.style.visibility = 'visible';
      successMessage.style.display = 'block';
    }
    
    const titleLines = document.querySelectorAll('.title-line');
    titleLines.forEach(line => {
      line.style.opacity = '1';
      line.style.visibility = 'visible';
    });
    
    const successSubtitle = document.querySelector('.success-subtitle');
    if (successSubtitle) {
      successSubtitle.style.opacity = '1';
      successSubtitle.style.visibility = 'visible';
    }
    
    const successDescription = document.querySelector('.success-description');
    if (successDescription) {
      successDescription.style.opacity = '1';
      successDescription.style.visibility = 'visible';
    }
    
    // Trigger success animation
    const successAnimation = document.querySelector('.success-animation');
    if (successAnimation) {
      successAnimation.classList.add('animate');
    }
    
    // Animate step cards
    setTimeout(() => {
      const stepCards = document.querySelectorAll('.step-card');
      stepCards.forEach((card, index) => {
        setTimeout(() => {
          card.classList.add('animate');
        }, index * 200);
      });
    }, 1000);
    
    // Add celebration effect
    setTimeout(() => {
      createCelebrationEffect();
    }, 1500);
  });

  // Celebration effect
  function createCelebrationEffect() {
    const colors = ['#B80101', '#dc3545', '#28a745', '#17a2b8', '#ffc107'];
    
    for (let i = 0; i < 50; i++) {
      setTimeout(() => {
        const particle = document.createElement('div');
        particle.className = 'celebration-particle';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.animationDelay = Math.random() * 3 + 's';
        particle.style.background = colors[Math.floor(Math.random() * colors.length)];
        
        document.querySelector('.success-background').appendChild(particle);
        
        setTimeout(() => {
          if (particle.parentNode) {
            particle.parentNode.removeChild(particle);
          }
        }, 3000);
      }, i * 50);
    }
  }
</script>

<!-- Modern Success Page Styles -->
<style>
  /* Root Variables */
  :root {
    --elkably-primary: #B80101;
    --elkably-primary-dark: #8B0000;
    --elkably-secondary: #ffffff;
    --elkably-accent: #f8f9fa;
    --elkably-text: #2c3e50;
    --elkably-text-light: #6c757d;
    --elkably-success: #28a745;
    --elkably-warning: #ffc107;
    --elkably-info: #17a2b8;
    --elkably-light: #f8f9fa;
    --elkably-dark: #343a40;
    --elkably-border: #dee2e6;
    --elkably-shadow: rgba(0, 0, 0, 0.1);
  }

  /* Main Container */
  .success-page-container {
    min-height: calc(100vh - 100px);
    position: relative;
    overflow: hidden;
    background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 40px 20px;
  }

  /* Animated Background */
  .success-background {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    z-index: 1;
  }

  /* Floating Math Elements */
  .floating-math-elements {
    position: absolute;
    width: 100%;
    height: 100%;
  }

  .math-element {
    position: absolute;
    font-size: 2rem;
    color: var(--elkably-primary);
    opacity: 0.1;
    font-weight: bold;
    animation: floatMath 8s ease-in-out infinite;
    pointer-events: none;
  }

  .math-element:nth-child(1) { top: 20%; left: 10%; animation-delay: 0s; }
  .math-element:nth-child(2) { top: 60%; left: 20%; animation-delay: 1s; }
  .math-element:nth-child(3) { top: 30%; left: 80%; animation-delay: 2s; }
  .math-element:nth-child(4) { top: 70%; left: 70%; animation-delay: 3s; }
  .math-element:nth-child(5) { top: 10%; left: 50%; animation-delay: 4s; }
  .math-element:nth-child(6) { top: 80%; left: 30%; animation-delay: 5s; }
  .math-element:nth-child(7) { top: 40%; left: 60%; animation-delay: 0.5s; }
  .math-element:nth-child(8) { top: 90%; left: 90%; animation-delay: 1.5s; }

  @keyframes floatMath {
    0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0.1; }
    50% { transform: translateY(-30px) rotate(180deg); opacity: 0.2; }
  }

  /* Geometric Shapes */
  .geometric-shapes {
    position: absolute;
    width: 100%;
    height: 100%;
  }

  .shape {
    position: absolute;
    border-radius: 50%;
    background: rgba(184, 1, 1, 0.05);
    animation: rotate 20s linear infinite;
  }

  .shape-1 {
    width: 80px;
    height: 80px;
    top: 10%;
    left: 5%;
    animation-delay: 0s;
  }

  .shape-2 {
    width: 120px;
    height: 120px;
    top: 70%;
    right: 10%;
    animation-delay: 5s;
  }

  .shape-3 {
    width: 60px;
    height: 60px;
    top: 30%;
    right: 20%;
    animation-delay: 10s;
  }

  .shape-4 {
    width: 100px;
    height: 100px;
    bottom: 20%;
    left: 15%;
    animation-delay: 15s;
  }

  @keyframes rotate {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }

  /* Main Content */
  .success-content {
    position: relative;
    z-index: 2;
    width: 100%;
    max-width: 800px;
  }

  .success-card {
    background: var(--elkably-secondary);
    border-radius: 20px;
    padding: 40px 30px;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
    border: 2px solid var(--elkably-border);
    text-align: center;
    animation: slideUp 0.8s ease-out;
    position: relative;
    overflow: hidden;
  }

  .success-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(184, 1, 1, 0.1), transparent);
    transition: left 0.5s;
  }

  .success-card:hover::before {
    left: 100%;
  }

  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateY(50px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Success Animation */
  .success-animation {
    margin-bottom: 25px;
  }

  .success-circle {
    width: 140px;
    height: 140px;
    margin: 0 auto;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .checkmark-container {
    width: 100px;
    height: 100px;
    background: var(--elkably-success);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 3;
    position: relative;
    animation: scaleIn 0.6s ease-out forwards;
    box-shadow: 0 8px 25px rgba(40, 167, 69, 0.3);
  }

  @keyframes scaleIn {
    0% {
      transform: scale(0);
      opacity: 0;
    }
    50% {
      transform: scale(1.15);
    }
    100% {
      transform: scale(1);
      opacity: 1;
    }
  }

  .checkmark-icon {
    font-size: 3rem;
    color: white;
    z-index: 4;
    position: relative;
    opacity: 1;
    display: inline-block;
    animation: checkmarkAppear 0.8s ease-out 0.3s both;
  }
  
  /* Fallback: Ensure icon is visible even before animation starts */
  .success-animation .checkmark-icon {
    opacity: 1;
    transform: scale(1) rotate(0deg);
  }
  
  /* When animation triggers */
  .success-animation.animate .checkmark-icon {
    animation: checkmarkAppear 0.8s ease-out 0.3s both;
  }

  @keyframes checkmarkAppear {
    0% {
      transform: scale(0) rotate(-45deg);
      opacity: 0;
    }
    50% {
      transform: scale(1.2) rotate(5deg);
      opacity: 1;
    }
    100% {
      transform: scale(1) rotate(0deg);
      opacity: 1;
    }
  }

  .pulse-ring {
    position: absolute;
    width: 140px;
    height: 140px;
    border: 3px solid var(--elkably-success);
    border-radius: 50%;
    animation: pulse 2s ease-out infinite;
    opacity: 0;
  }

  .pulse-ring:nth-child(2) { animation-delay: 0.3s; }
  .pulse-ring:nth-child(3) { animation-delay: 0.6s; }
  .pulse-ring:nth-child(4) { animation-delay: 0.9s; }

  @keyframes pulse {
    0% {
      transform: scale(0.6);
      opacity: 0.8;
    }
    100% {
      transform: scale(1.5);
      opacity: 0;
    }
  }

  .success-animation.animate .pulse-ring {
    animation-play-state: running;
  }

  .success-animation.animate .checkmark-container {
    animation-play-state: running;
  }

  .success-animation.animate .checkmark-icon {
    animation-play-state: running;
  }

  /* Success Message */
  .success-message {
    margin-bottom: 30px;
    opacity: 1 !important; /* Ensure it always stays visible */
    visibility: visible !important; /* Ensure it's always visible */
  }

  .success-title {
    font-size: 2.75rem;
    font-weight: 800;
    margin-bottom: 15px;
    line-height: 1.2;
  }

  .title-line {
    display: block;
    animation: fadeInUp 0.8s ease-out forwards;
    opacity: 1; /* Ensure it stays visible */
  }

  .title-line.highlight-red {
    color: var(--elkably-primary);
    animation-delay: 0.2s;
    opacity: 1; /* Ensure it stays visible */
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .success-subtitle {
    font-size: 1.3rem;
    color: var(--elkably-text);
    margin-bottom: 10px;
    animation: fadeInUp 0.8s ease-out 0.4s both;
    opacity: 1 !important; /* Ensure it stays visible */
    visibility: visible !important; /* Ensure it's always visible */
  }

  .success-description {
    font-size: 1rem;
    color: var(--elkably-text-light);
    max-width: 500px;
    margin: 0 auto;
    animation: fadeInUp 0.8s ease-out 0.6s both;
    opacity: 1 !important; /* Ensure it stays visible */
    visibility: visible !important; /* Ensure it's always visible */
  }

  /* Student Code Section */
  .student-code-section {
    background: linear-gradient(135deg, var(--elkably-light), var(--elkably-accent));
    border-radius: 20px;
    padding: 30px 25px;
    margin-bottom: 25px;
    border: 2px solid var(--elkably-primary);
    animation: fadeInUp 0.8s ease-out 0.8s both;
    position: relative;
  }

  .student-code-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(184, 1, 1, 0.05), rgba(184, 1, 1, 0.02));
    border-radius: 18px;
    z-index: 0;
  }

  .code-header {
    margin-bottom: 20px;
  }

  .code-title {
    font-size: 1.75rem;
    font-weight: 700;
    color: var(--elkably-primary);
    margin-bottom: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 15px;
    position: relative;
    z-index: 1;
  }

  .code-subtitle {
    color: var(--elkably-text-light);
    font-size: 1rem;
    position: relative;
    z-index: 1;
  }

  .code-display-container {
    margin-bottom: 20px;
  }

  .code-box {
    background: var(--elkably-secondary);
    border: 3px solid var(--elkably-primary);
    border-radius: 15px;
    padding: 20px 25px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 20px;
    margin-bottom: 15px;
    box-shadow: 0 10px 30px rgba(184, 1, 1, 0.1);
    position: relative;
    z-index: 1;
  }

  .code-text {
    font-size: 2.5rem;
    font-weight: bold;
    color: var(--elkably-primary);
    font-family: 'Courier New', monospace;
    letter-spacing: 3px;
    flex: 1;
    text-align: center;
  }

  .copy-button {
    background: var(--elkably-primary);
    color: white;
    border: none;
    padding: 15px 25px;
    border-radius: 10px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 1rem;
  }

  .copy-button:hover {
    background: var(--elkably-primary-dark);
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(184, 1, 1, 0.3);
  }

  .copy-button.copied {
    background: var(--elkably-success);
  }

  .code-actions {
    display: flex;
    gap: 15px;
    justify-content: center;
    flex-wrap: wrap;
  }

  .action-btn {
    background: var(--elkably-secondary);
    border: 2px solid var(--elkably-border);
    padding: 12px 20px;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 8px;
    font-weight: 500;
    color: var(--elkably-text-light);
  }

  .action-btn:hover {
    border-color: var(--elkably-primary);
    color: var(--elkably-primary);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
  }

  .code-warning {
    background: #fff3cd;
    border: 1px solid #ffeaa7;
    color: #856404;
    padding: 15px 20px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    gap: 10px;
    font-weight: 500;
    position: relative;
    z-index: 1;
  }

  /* Status Section */
  .status-section {
    margin-bottom: 40px;
    animation: fadeInUp 0.8s ease-out 1s both;
  }

  .status-card {
    background: var(--elkably-secondary);
    border-radius: 15px;
    padding: 30px;
    display: flex;
    align-items: flex-start;
    gap: 20px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    border-left: 5px solid var(--elkably-warning);
  }

  .status-icon {
    width: 60px;
    height: 60px;
    background: var(--elkably-warning);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--elkably-dark);
    font-size: 1.5rem;
    flex-shrink: 0;
  }

  .status-content h4 {
    font-size: 1.3rem;
    font-weight: 700;
    margin-bottom: 10px;
    color: var(--elkably-text);
  }

  .status-content p {
    color: var(--elkably-text-light);
    margin-bottom: 20px;
    line-height: 1.6;
  }

  .status-timeline {
    display: flex;
    gap: 20px;
    flex-wrap: wrap;
  }

  .timeline-item {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.9rem;
    color: var(--elkably-text-light);
  }

  .timeline-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: var(--elkably-border);
  }

  .timeline-item.completed .timeline-dot {
    background: var(--elkably-success);
  }

  .timeline-item.active .timeline-dot {
    background: var(--elkably-warning);
    animation: pulse 2s ease-in-out infinite;
  }

  /* Next Steps */
  .next-steps-section {
    margin-bottom: 40px;
    animation: fadeInUp 0.8s ease-out 1.2s both;
  }

  .steps-title {
    font-size: 2rem;
    font-weight: 700;
    color: var(--elkably-text);
    margin-bottom: 30px;
  }

  .steps-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 25px;
  }

  .step-card {
    background: var(--elkably-secondary);
    border-radius: 15px;
    padding: 30px 20px;
    text-align: center;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
    opacity: 0;
    transform: translateY(30px);
    border: 1px solid var(--elkably-border);
  }

  .step-card.animate {
    opacity: 1;
    transform: translateY(0);
  }

  .step-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
    border-color: var(--elkably-primary);
  }

  .step-icon {
    width: 80px;
    height: 80px;
    background: linear-gradient(135deg, var(--elkably-primary), var(--elkably-primary-dark));
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 20px;
    color: white;
    font-size: 2rem;
  }

  .step-card h4 {
    font-size: 1.2rem;
    font-weight: 700;
    margin-bottom: 15px;
    color: var(--elkably-text);
  }

  .step-card p {
    color: var(--elkably-text-light);
    line-height: 1.6;
  }

  /* Action Buttons */
  .action-section {
    display: flex;
    gap: 20px;
    justify-content: center;
    flex-wrap: wrap;
    animation: fadeInUp 0.8s ease-out 1.4s both;
  }

  .btn-primary, .btn-secondary {
    padding: 15px 30px;
    border-radius: 12px;
    font-weight: 600;
    font-size: 1.1rem;
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: 10px;
    transition: all 0.3s ease;
    min-width: 200px;
    justify-content: center;
  }

  .btn-primary {
    background: var(--elkably-primary);
    color: white;
    border: none;
  }

  .btn-primary:hover {
    background: var(--elkably-primary-dark);
    transform: translateY(-3px);
    box-shadow: 0 10px 30px rgba(184, 1, 1, 0.4);
    color: white;
  }

  .btn-secondary {
    background: var(--elkably-secondary);
    color: var(--elkably-primary);
    border: 2px solid var(--elkably-primary);
  }

  .btn-secondary:hover {
    background: var(--elkably-primary);
    color: white;
    transform: translateY(-3px);
    box-shadow: 0 10px 30px rgba(184, 1, 1, 0.4);
  }

  /* Notifications */
  .notification {
    position: fixed;
    top: 30px;
    right: 30px;
    background: var(--elkably-secondary);
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    z-index: 10000;
    transform: translateX(400px);
    transition: transform 0.3s ease;
    border-left: 4px solid;
    max-width: 350px;
    color: var(--elkably-text);
  }

  .notification.show {
    transform: translateX(0);
  }

  .notification-success { border-left-color: var(--elkably-success); }
  .notification-error { border-left-color: #dc3545; }
  .notification-info { border-left-color: var(--elkably-info); }

  .notification-content {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .notification-success .notification-content i { color: var(--elkably-success); }
  .notification-error .notification-content i { color: #dc3545; }
  .notification-info .notification-content i { color: var(--elkably-info); }

  /* Celebration Particles */
  .celebration-particle {
    position: absolute;
    width: 6px;
    height: 6px;
    border-radius: 50%;
    animation: celebrate 3s ease-out forwards;
    pointer-events: none;
  }

  @keyframes celebrate {
    0% {
      transform: translateY(100vh) scale(0);
      opacity: 1;
    }
    100% {
      transform: translateY(-100px) scale(1);
      opacity: 0;
    }
  }

  /* Highlight Effect */
  .code-display-container.highlight {
    animation: highlight 3s ease-in-out;
  }

  @keyframes highlight {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.02); box-shadow: 0 0 30px rgba(184, 1, 1, 0.3); }
  }

  /* Dark Theme Support */
  .dark-theme .success-page-container {
    background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
  }

  .dark-theme .success-card {
    background: #2d3748;
    border-color: rgba(255, 255, 255, 0.1);
  }

  .dark-theme .success-subtitle,
  .dark-theme .steps-title,
  .dark-theme .step-card h4,
  .dark-theme .status-content h4 {
    color: #f9fafb;
  }

  .dark-theme .success-description,
  .dark-theme .code-subtitle,
  .dark-theme .status-content p,
  .dark-theme .step-card p {
    color: #9ca3af;
  }

  .dark-theme .student-code-section {
    background: linear-gradient(135deg, #374151, #4b5563);
  }

  .dark-theme .code-box {
    background: #1f2937;
    border-color: var(--elkably-primary);
  }

  .dark-theme .status-card,
  .dark-theme .step-card {
    background: #374151;
  }

  .dark-theme .action-btn {
    background: #374151;
    color: #9ca3af;
    border-color: #6b7280;
  }

  .dark-theme .btn-secondary {
    background: #374151;
    color: var(--elkably-primary);
    border-color: var(--elkably-primary);
  }

  .dark-theme .notification {
    background: #374151;
    color: #f9fafb;
  }

  /* Responsive Design */
  @media (max-width: 768px) {
    .success-page-container {
      min-height: calc(100vh - 80px);
      padding: 20px 15px;
    }

    .success-card {
      padding: 30px 20px;
    }

    .success-title {
      font-size: 2rem;
    }

    .success-subtitle {
      font-size: 1.1rem;
    }

    .success-description {
      font-size: 0.95rem;
    }

    .code-text {
      font-size: 2rem;
      letter-spacing: 2px;
    }

    .code-box {
      flex-direction: column;
      text-align: center;
      padding: 18px 20px;
    }

    .student-code-section {
      padding: 25px 20px;
    }

    .code-actions {
      flex-direction: column;
      align-items: center;
    }

    .action-btn {
      width: 100%;
      max-width: 200px;
    }

    .action-section {
      flex-direction: column;
      align-items: center;
    }

    .btn-primary,
    .btn-secondary {
      width: 100%;
      max-width: 250px;
    }

    .steps-grid {
      grid-template-columns: 1fr;
    }

    .status-card {
      flex-direction: column;
      text-align: center;
    }

    .status-timeline {
      justify-content: center;
    }

    .notification {
      right: 10px;
      left: 10px;
      max-width: none;
    }
  }

  @media (max-width: 480px) {
    .success-page-container {
      padding: 15px 10px;
    }

    .success-card {
      padding: 25px 15px;
    }

    .success-title {
      font-size: 1.75rem;
    }

    .success-subtitle {
      font-size: 1rem;
    }

    .code-text {
      font-size: 1.5rem;
      letter-spacing: 1px;
    }

    .success-circle {
      width: 120px;
      height: 120px;
    }

    .checkmark-container {
      width: 80px;
      height: 80px;
    }

    .checkmark-icon {
      font-size: 2.5rem;
    }

    .pulse-ring {
      width: 120px;
      height: 120px;
    }
  }
</style>

<%- include('../partials/footer') %>